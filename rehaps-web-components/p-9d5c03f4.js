var t;!function(t){t.Animation=class{constructor(t){this._element=null,this._currentAnimation=null,this._element=t}async start(t){if(await this.cancel(),this._element){t.options=this.calculateDurationLeft(t);const s=this._currentAnimation=this._element.animate(t.keyframes,t.options);try{return await s.finished,s.commitStyles(),this._currentAnimation=null,!0}catch(t){return!1}}}calculateDurationLeft(t){if(""!==t.progressProperty&&t.keyframes instanceof Array){const s=Number.parseFloat(this._element.style[t.progressProperty]||this._element.style.getPropertyValue(t.progressProperty)||getComputedStyle(this._element)[t.progressProperty])||0,e=Number.parseFloat(t.keyframes[0][t.progressProperty].toString()),n=Number.parseFloat(t.keyframes[1][t.progressProperty].toString()),i=Math.abs(n-s)/Math.abs(n-e);if("number"==typeof t.options)t.options*=i;else{const s=Number.parseFloat(t.options.duration.toString());let e=s*i;"string"==typeof t.options.duration&&(e+=t.options.duration.replace(s.toString(),"")),t.options.duration=e}}return t.options}cancel(){return new Promise((t=>{var s,e;try{null===(s=this._currentAnimation)||void 0===s||s.commitStyles(),null===(e=this._currentAnimation)||void 0===e||e.cancel(),setTimeout((()=>{t()}),0)}catch(s){t()}}))}}}(t||(t={}));class s extends HTMLElement{constructor(){super(...arguments),this.animation=null}static castToAnimatedElement(s){const e=s;return void 0===e.animation&&(e.animation=new t.Animation(e)),e}}export{s as A}